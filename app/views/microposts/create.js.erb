$('#flash').html("<%= j(render 'shared/flash') %>");

<% if @micropost.errors.any? %>

(function() {
  var $post = $("<%= j render('shared/error_messages', object: @micropost) %>")
  $post.hide().prependTo($("#new_micropost")).fadeIn()
})()

<% else %>

(function() {
  var $post = $("<%= j render @micropost %>")
  
  // ol.microposts works on both the homepage (static/home) and users/show!
  $post.hide().prependTo($("ol.microposts")).fadeIn()
})()

<% end %>